<input type="text" id="search" placeholder="Search by title..." />
<select id="categoryFilter">
  <option value="">All Categories</option>
</select>
<select id="sortPrice">
  <option value="">Sort by Price</option>
  <option value="asc">Low to High</option>
  <option value="desc">High to Low</option>
</select>
<div id="productCount"></div>
<div id="productContainer"></div>
<script>
let allProducts = [];

async function fetchProducts() {
  const res = await fetch('https://fakestoreapi.com/products');
  const data = await res.json();
  allProducts = data;
  renderProducts(allProducts);
}

async function fetchCategories() {
  const res = await fetch('https://fakestoreapi.com/products/categories');
  const categories = await res.json();
  populateCategoryDropdown(categories);
}

function filterAndRender() {
  const searchText = document.getElementById('search').value.toLowerCase();
  const selectedCategory = document.getElementById('categoryFilter').value;
  const sortOrder = document.getElementById('sortPrice').value;

  let filtered = [...allProducts];

  if (searchText) {
    filtered = filtered.filter(product =>
      product.title.toLowerCase().includes(searchText)
    );
  }

  if (selectedCategory) {
    filtered = filtered.filter(product => product.category === selectedCategory);
  }

  if (sortOrder === 'asc') {
    filtered.sort((a, b) => a.price - b.price);
  } else if (sortOrder === 'desc') {
    filtered.sort((a, b) => b.price - a.price);
  }

  renderProducts(filtered);
  document.getElementById('productCount').textContent = `Total: ${filtered.length}`;
}
document.getElementById('search').addEventListener('input', filterAndRender);
document.getElementById('categoryFilter').addEventListener('change', filterAndRender);
document.getElementById('sortPrice').addEventListener('change', filterAndRender);


</script>

